#!/usr/bin/env node
/**
 * srcDirectory - Represents source directory
 * componentDirectory - Represents component directory in src
 * argv - Array of passed options
 */"use strict";require("regenerator-runtime/runtime");var _fs=require("fs"),_path=require("path");function asyncGeneratorStep(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}function _asyncToGenerator(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){function f(a){asyncGeneratorStep(h,d,e,f,g,"next",a)}function g(a){asyncGeneratorStep(h,d,e,f,g,"throw",a)}var h=a.apply(b,c);f(void 0)})}}function _toArray(a){return _arrayWithHoles(a)||_iterableToArray(a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithHoles(a){if(Array.isArray(a))return a}var componentName,componentDirectory,componentNameCc,srcDirectory=(0,_path.resolve)(process.cwd(),"src"),componentsDirectory=(0,_path.resolve)(srcDirectory,"components"),_process$argv=_toArray(process.argv),argv=_process$argv.slice(2),checkComponentName=function(a){//RegExp('[a-zA-Z]+[-][a-zA-Z]+').test(name) doesn't work might do manual search!
if(a.lastIndexOf("-")!==a.indexOf("-"))return!1;var b=!0,c=!1,d=void 0;try{for(var e,f,g=a[Symbol.iterator]();!(b=(e=g.next()).done);b=!0)if(f=e.value,!1===isNaN(f))return!1}catch(a){c=!0,d=a}finally{try{b||null==g["return"]||g["return"]()}finally{if(c)throw d}}return!0},getComponentName=function(a){var b=a.split("-"),c=b[0].charAt(0).toUpperCase()+b[0].slice(1),d=b[1].charAt(0).toUpperCase()+b[1].slice(1);return"".concat(c).concat(d)},fileType=function(a){return new Promise(function(b,c){(0,_fs.stat)(a,function(d,e){return d&&c({code:4002,file:a}),void(e.isDirectory()?(console.log("".concat(a," is of type Directory")),b()):(console.log("".concat(a," is of type Regular File")),c({code:4001,file:a})))})})},fileExists=function(a){return new Promise(function(b,c){(0,_fs.access)(a,function(d){return d?(console.log("".concat(a," is not accessible")),void c({code:4e3,file:a})):void(console.log("".concat(a," is accessible")),b())})})},fileCreate=function(a){return new Promise(function(b,c){(0,_fs.mkdir)(a,{recursive:!0},function(d){return d?(console.log("".concat(a," cannot be created")),void c({code:4003,file:a})):void(console.log("".concat(a," is created")),b())})})},componentCreatePromise=function(a){return new Promise(/*#__PURE__*/function(){var b=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function b(c,d){return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.prev=0,b.next=3,fileExists(a.name);case 3:if(!a.create){b.next=8;break}return d({code:4004,file:a.name}),b.abrupt("return");case 8:return b.prev=8,b.next=11,fileType(a.name);case 11:b.next=17;break;case 13:return b.prev=13,b.t0=b["catch"](8),d(b.t0),b.abrupt("return");case 17:b.next=36;break;case 19:if(b.prev=19,b.t1=b["catch"](0),!(4e3===b.t1.code&&a.create)){b.next=33;break}return b.prev=22,b.next=25,fileCreate(a.name);case 25:return c(),b.abrupt("return");case 29:return b.prev=29,b.t2=b["catch"](22),d(b.t2),b.abrupt("return");case 33:if(4001!==b.t1.code){b.next=36;break}return d(b.t1),b.abrupt("return");case 36:case"end":return b.stop();}},b,null,[[0,19],[8,13],[22,29]])}));return function(){return b.apply(this,arguments)}}())},componentCreate=/*#__PURE__*/function(){var a=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(b){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.all(b.map(function(a){return componentCreatePromise(a)})));case 1:case"end":return a.stop();}},a)}));return function(){return a.apply(this,arguments)}}(),_main=/*#__PURE__*/function(){var a=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(b){var c,d;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(1<b.length)){a.next=4;break}console.log("Error! I dont accept more than 1 parameter!"),a.next=22;break;case 4:if(componentName=b[0],!checkComponentName(componentName)){a.next=21;break}return componentNameCc=getComponentName(componentName),componentDirectory=(0,_path.resolve)(componentsDirectory,componentName),c=[{name:srcDirectory,create:!1},{name:componentsDirectory,create:!1},{name:componentDirectory,create:!0}],a.prev=9,a.next=12,componentCreate(c);case 12:d=a.sent,d&&console.log("Done!"),a.next=19;break;case 16:a.prev=16,a.t0=a["catch"](9),console.log(a.t0);case 19:a.next=22;break;case 21:console.log("Use component name of format 'component-name'");case 22:case"end":return a.stop();}},a,null,[[9,16]])}));return function(){return a.apply(this,arguments)}}();_main(argv);
